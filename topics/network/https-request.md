# 🌐 HTTPS 요청 전체 흐름 (TCP + TLS)

## 1. DNS 조회

- 브라우저는 먼저 요청할 도메인의 **IP 주소를 DNS**를 통해 확인
- (브라우저 캐시 → OS 캐시 → DNS 서버 순으로 탐색)

---

## 2. TCP 연결 (3-Way Handshake)

- 목적: **신뢰성 있는 연결** 수립

1. 클라이언트 → 서버 : **SYN** (연결 요청)
2. 서버 → 클라이언트 : **SYN + ACK** (수락 및 응답)
3. 클라이언트 → 서버 : **ACK** (최종 확인)

- 이 과정을 거쳐 **TCP 세션이 성립**

---

## 3. TLS Handshake

- 목적: **보안 세션** 수립 (암호화된 채널 확보)

1. **ClientHello**

   - 클라이언트가 지원 가능한 암호화 방식, TLS 버전, 랜덤 값 전송

2. **ServerHello**

   - 서버가 선택한 암호화 방식, 랜덤 값 전송
   - 서버 인증서(공개키 포함) 전달

3. **인증서 검증**

   - 클라이언트가 인증서가 **신뢰할 수 있는 CA**에 의해 발급되었는지 확인

4. **키 교환**

   - 클라이언트가 세션키를 서버 공개키로 암호화해 전달
   - 서버는 개인키로 복호화 후 세션키 획득

5. **세션 키 공유 완료**

   - 양쪽이 동일한 **대칭키(Session Key)** 를 가지게 됨

6. **Finished 메시지 교환**

   - 양쪽 모두 준비 완료 후 암호화된 통신 시작

---

## 4. 실제 HTTPS 요청/응답

- 이제부터는 모든 HTTP 데이터가 **세션 키 기반 대칭키 암호화**로 주고받음
- 즉, 요청 헤더, 본문, 응답까지 모두 암호화되어 전송

---

## 📝 요약 흐름

```
DNS 조회
   ↓
TCP 3-Way Handshake (연결 수립)
   ↓
TLS Handshake (보안 채널 수립)
   ↓
HTTPS 요청/응답 (암호화된 통신)
```
